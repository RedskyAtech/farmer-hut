<Page>
    <GridLayout *ngIf="!pinLocation" class="page">
        <CardView #warningDialog modal size="lg" duration="100" backgroundColor="transparent">
            <GridLayout rows="auto,auto,auto,auto" width="80%" height="30%" borderRadius="20" backgroundColor="white">
                <StackLayout row="0" height="40%">
                    <Image height="80vh" width="80vh" src="res://warning"></Image>
                </StackLayout>
                <StackLayout row="1" height="20%" verticalAlignment="middle">
                    <Label color="black" textWrap="true" textAlignment="center" fontSize="18" fontWeight="900"
                        text="Something Went Wrong"></Label>
                </StackLayout>
                <StackLayout row="2" height="20%" verticalAlignment="middle">
                    <Label color="black" textWrap="true" textAlignment="center" fontSize="14" fontWeight="500"
                        [text]="errorMessage"></Label>
                </StackLayout>
                <StackLayout row="3" height="20%">
                    <Button class="ok-button" text="OK" (tap)="onOK()"></Button>
                </StackLayout>
            </GridLayout>
        </CardView>
        <GridLayout class="page" rows="auto,auto,auto,auto,auto,auto,auto,auto,auto">
            <GridLayout row="0" width="100%" marginTop="10" height="20%" columns="auto,auto,auto">
                <StackLayout col="0" height="40%" verticalAlignment="top" width="20%">
                    <Button class="backButton" marginTop="10%" (tap)="onBack()"></Button>
                </StackLayout>
                <StackLayout col="1" height="100%" width="60%">
                    <Image class="appLogo" src="res://logo"></Image>
                </StackLayout>
            </GridLayout>
            <StackLayout row="1" width="100%" height="10%">
                <Label class="appLabel" text="Farmers Hut"></Label>
            </StackLayout>
            <StackLayout row="2" width="80%" height="10%">
                <TextField [hint]="addressHint" [text]="address" (textChange)="onAddressTextChanged($event)"
                    secure="false" padding="0" [borderColor]="addressBorderColor" returnKeyType="done"
                    autocorrect="false" class="input input-border input-field">
                </TextField>
            </StackLayout>
            <StackLayout row="3" width="80%" height="10%">
                <TextField [hint]="mapAddressHint" [text]="mapAddress" edimapAddressClasstable="false"
                    (textChange)="onMapAddressTextChanged($event)" secure="false" padding="0" returnKeyType="done"
                    [class]="mapLabelClass?'input-field input input-border':'map-focus'" autocorrect="false">
                </TextField>
            </StackLayout>
            <StackLayout row="4" width="80%" height="10%">
                <TextField [text]="city" secure="false" [borderColor]="cityBorderColor" returnKeyType="done" padding="0"
                    autocorrect="false" class="input input-border input-field">
                </TextField>
            </StackLayout>
            <StackLayout row="5" width="80%" height="10%">
                <TextField [text]="district" secure="false" returnKeyType="done" padding="0"
                    [borderColor]="districtBorderColor" autocorrect="false" class="input input-border input-field">
                </TextField>
            </StackLayout>
            <StackLayout row="6" width="80%" height="10%">
                <Button class="button" text="Add Address" (tap)="onAddAddress()"></Button>
            </StackLayout>
            <StackLayout row="7" width="80%" height="10%">
                <Button class="mapButton" text="Choose your current location from map" (tap)="onMap()"></Button>
            </StackLayout>
        </GridLayout>
    </GridLayout>

    <GridLayout *ngIf="pinLocation" class="page">

        <MapView #mapView [latitude]="intialLatitude" [longitude]="intialLongitude" [zoom]="zoom" [minZoom]="minZoom"
            [maxZoom]="maxZoom" [bearing]="bearing" [tilt]="tilt" i-padding="50,50,50,50" [padding]="padding"
            (mapReady)="onMapReady($event)" (markerSelect)="onMarkerEvent($event)"
            (markerBeginDragging)="onMarkerEvent($event)" (markerEndDragging)="onMarkerEvent($event)"
            (markerDrag)="onMarkerEvent($event)" (markerInfoWindowTapped)="onMarkerEvent($event)"
            (coordinateTapped)="onCoordinateTapped($event)" (cameraChanged)="onCameraChanged($event)"
            (cameraMove)="onCameraMove($event)"></MapView>

        <Image *ngIf="isVisibleMapIcon" src="res://map_icon" width="10%" height="8%" stretch="aspectFit"
            verticalAlignment="middle" horizontalAlignment="center"></Image>

        <Button class="select-button" verticalAlignment="bottom" horizontalAlignment="center" text="Select"
            (tap)="onSelectLocation()"></Button>

    </GridLayout>
</Page>